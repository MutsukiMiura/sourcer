<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sourcer</title>
  <link href="//fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet">
  <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- <link rel="stylesheet" href="//code.getmdl.io/1.1.3/material.indigo-blue.min.css" /> -->
  <link rel="stylesheet" href="./dist/styles.css" />
  <style>
  .radar {
    display: flex;
    flex-flow: row wrap;
    margin: 0 auto;
    align-items: stretch;
  }
  .radar .mdl-cell {
    box-sizing: border-box;
  }
  .radar .mdl-cell--6-col {
    width: calc(50% - 16px);
  }

  .method > p, .method > dl, .method > h6, .method > pre, .method > div {
    margin-left: 32px;
  }
  .method > dl {
    -webkit-margin-before: 0.5em;
    -webkit-margin-after: 0.5em;
  }
  </style>
</head>

<body>
  <div class="scr-layout mdl-layout mdl-layout--fixed-header is-upgraded">
    <main class="mdl-layout__content scr-main">
      <div class="scr-content content">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--12-col-tablet">
            <h3>概要</h3>
            Sourcer というプログラムで動かす機体を使い対戦をするゲームです。<br>
            Sourcer のプログラムは JavaScript というプログラミング言語を使い記述できます。

            <h4>ステータス</h4>
            <dl>
              <dt>シールド</dt>
              <dd>初期値 100 でダメージをうけると減ります。0 になると戦闘不能となり、相手より先に戦闘不能になると負けとなってしまいます。</dd>
              <dt>温度</dt>
              <dd>初期値 0 で攻撃を行ったり、ダメージをうけると上昇します。温度が 100 を超えると、徐々に耐久力が減っていきます。温度は時間経過で徐々に減っていきます。</dd>
              <dt>燃料</dt>
              <dd>Sourcer が移動を行うと徐々に減っていきます。0 になると移動が行えなくなります。</dd>
              <dt>AIミサイル残弾</dt>
              <dd>初期値 20 でミサイルを使うごとに減少します。0 になるとミサイルが発射できなくなります。</dd>
            </dl>

            <h4>攻撃手段</h4>
            <dl>
              <dt>レーザー</dt>
              <dd>発射すると真っ直ぐに飛んでいく攻撃手段です。残弾数は無制限です。</dd>
              <dt>AIミサイル</dt>
              <dd>Sourcerと同様、プログラムで動かすことができる攻撃手段です。20発まで発射することができます。AIミサイルはレーザーで撃ち落とすことができます。</dd>
            </dl>

            <h4>その他</h4>
            <ul>
              <li>高度が0の位置に地面があり、地面に触れるとダメージをうけます。</li>
              <li>Sourcerは重力に引っ張られ、移動を行わないと、徐々に地面に引き寄せられます。</li>
            </ul>
          </div>

          <div style="break-before: page;" class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--12-col-tablet">
            <h3>プログラム</h3>
              function を return することで AI を登録します。<br>
              引数の コントローラ を通して操作できます。
              <pre class="code" id="sample1">var ai = function(controller) {
  if (controller.altitude() < 100) {
    // 高度が下がったら上昇
    controller.ascent();
  }
  // 前進する
  controller.ahead();
};
return ai;</pre>
              <h4>コントローラで行える操作</h4>
              <dl>
                <dt>移動</dt><dd>前進、後退、上昇、下降など</dd>
                <dt>レーダー</dt><dd>敵機の探知と、自機に飛来してくる攻撃の探知など</dd>
                <dt>攻撃</dt><dd>レーザーの発射、AIミサイルの発射</dd>
                <dt>ステータスの確認</dt><dd>耐久力、温度、燃料、高度、ミサイル残弾数など</dd>
              </dl>
              攻撃操作は一度に1つしか受け付けません。<br>
              AIミサイル の AI は、引数に指定します。
              <pre class="code">var missileAi = function(controller) {
  if(controller.scanEnemy(90, 180)) {
    // 左側にいる場合は、左へ回転
    controller.turnLeft();
  } else {
    // それ以外は、右へ回転
    controller.turnRight();
  }
  // 今向いている方向へ、加速する
  controller.speedUp();
};

var ai = function(controller) {
  // ・・・省略・・・
  controller.fireMissile(missileAi);
  // ・・・省略・・・
};
return ai;</pre>
          </div>
        </div>
        <div class="mdl-grid">
          <div style="break-before: page;" class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--12-col-tablet">
            <h3>SourcerController</h3>
            <p>Sourcerを操作するためのコントローラ。</p>
            <h4 class="sec">移動系の命令</h4>
            <div class="method">
              <h5>ahead()</h5>
              <p>向いている方向に前進します。</p>
            </div>
            <div class="method">
              <h5>back()</h5>
              <p>向いている方向とは逆方向に後退します。</p>
            </div>
            <div class="method">
              <h5>ascent()</h5>
              <p>上昇します。</p>
            </div>
            <div class="method">
              <h5>descent()</h5>
              <p>下降します。</p>
            </div>
            <div class="method">
              <h5>turn()</h5>
              <p>現在向いている方向と逆方向を向きます。</p>
            </div>

            <h4 class="sec">レーダー系の命令</h4>
            <div class="method">
              <h5>scanEnemy(direction, angle, renge)</h5>
              <p>指定した方向、範囲、距離に敵が入っているか否かを判定します。</p>
              <dl>
                <dt>{number} direction</dt>
                <dd>レーダーの方向を度数で指定。向いている方向を0とし、上方向がプラス＋、下方向がマイナス−。</dd>
                <dt>{number} angle</dt>
                <dd>レーダーの範囲・角度。</dd>
                <dt>{number} renge</dt>
                <dd>レーダーの距離。省略した場合、距離に関係無く判定される。</dd>
              </dl>
              <dl><dt>returns {boolean}</dt><dd>指定範囲内に敵が入っていた場合 true</dd>
              <h6>Sample</h6>
              <pre class="code">controller.scanEnemy(45, 60, 75);</pre>
              <div class="radar">
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>右向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="-45" data-angle="60"
                    data-distance="80" data-arrow="0"></canvas>
                </div>
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>左向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="-135" data-angle="60"
                    data-distance="80" data-arrow="180"></canvas>
                </div>
              </div>
              <pre class="code">controller.scanEnemy(-45, 120, 50);</pre>
              <div class="radar">
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>右向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="45" data-angle="120"
                    data-distance="50" data-arrow="0"></canvas>
                </div>
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>左向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="135" data-angle="120"
                    data-distance="50" data-arrow="180"></canvas>
                </div>
              </div>
            </div>
            <div class="method">
              <h5>scanAttack(direction, angle, renge)</h5>
              <p>指定した方向、範囲、距離に敵の攻撃が近づいてきているか否かを判定します。</p>
              <dl>
                <dt>{number} direction</dt>
                <dd>レーダーの方向を度数で指定。向いている方向を0とし、上方向がプラス＋、下方向がマイナス−。</dd>
                <dt>{number} angle</dt>
                <dd>レーダーの範囲・角度。</dd>
                <dt>{number} renge</dt>
                <dd>レーダーの距離。省略した場合、距離に関係無く判定される。</dd>
              </dl>
              <dl><dt>returns {boolean}</dt><dd>指定範囲内に敵の攻撃が入っていた場合 true</dd>
            </div>

            <h4 style="break-before: page;" class="sec">攻撃系の命令</h4>
            <div class="method">
              <h5>fireLaser(direction, power)</h5>
              <p>レーザーを発射します。</p>
              <dl>
                <dt>{number} direction</dt>
                <dd>打ち出す方向を度数で指定。向いている方向を0とし、上方向がプラス＋、下方向がマイナス−。</dd>
                <dt>{number} power</dt>
                <dd>打ち出す強さ。</dd>
              </dl>
            </div>
            <div class="method">
              <h5>fireMissile(ai)</h5>
              <p>AIミサイルを発射します。</p>
              <dl>
                <dt>{function} ai</dt>
                <dd>ミサイルの動きを制御するための function</dd>
              </dl>
            </div>

            <h4 class="sec">情報取得系の命令</h4>
            <div class="method">
              <h5>shield()</h5>
              <p>自機のシールドの耐久力を取得します。</p>
              <dl><dt>returns {number}</dt><dd>自機のシールドの耐久力</dd>
            </div>
            <div class="method">
              <h5>fuel()</h5>
              <p>自機の残燃料を取得します。</p>
              <dl><dt>returns {number}</dt><dd>自機の燃料</dd>
            </div>
            <div class="method">
              <h5>temperature()</h5>
              <p>自機の温度を取得します。</p>
              <dl><dt>returns {number}</dt><dd>自機の温度</dd>
            </div>
            <div class="method">
              <h5>missileAmmo()</h5>
              <p>自機のAIミサイル残弾数を取得します。</p>
              <dl><dt>returns {number}</dt><dd>自機のAIミサイルの残段数</dd>
            </div>
            <div class="method">
              <h5>altitude()</h5>
              <p>現在の高度を取得します。</p>
              <dl><dt>returns {number}</dt><dd>現在の高度値</dd>
            </div>
            <div class="method">
              <h5>frame()</h5>
              <p>戦闘を開始してから経過した フレーム数 を取得します。</p>
              <dl><dt>returns {number}</dt><dd>戦闘を開始してから経過した フレーム数</dd>
            </div>

            <h4 class="sec">その他の命令</h4>
            <div class="method">
              <h5>wait(frame)</h5>
              <p>指定したフレーム数、行動をしない命令を出します。</p>
              <dl>
                <dt>{number} frame</dt>
                <dd>行動をしないフレーム数</dd>
              </dl>
            </div>
          </div>
          <div style="break-before: page;" class="mdl-cell mdl-cell--6-col mdl-cell--12-col-phone mdl-cell--12-col-tablet">
            <h3>MissileController</h3>
            <p>AIミサイルを操作するためのコントローラ。</p>
            <h4 class="sec">移動系の命令</h4>
            <div class="method">
              <h5>speedUp()</h5>
              <p>速度を上げます。</p>
            </div>
            <div class="method">
              <h5>speedDown()</h5>
              <p>速度を下げます。</p>
            </div>
            <div class="method">
              <h5>turnRight()</h5>
              <p>右方向に向きを変えます。</p>
            </div>
            <div class="method">
              <h5>turnLeft()</h5>
              <p>左方向に向きを変えます。</p>
            </div>
            <h4 class="sec">レーダー系の命令</h4>
            <div class="method">
              <h5>scanEnemy(direction, angle, renge)</h5>
              <p>指定した方向、範囲、距離に敵が入っているか否かを判定します。<br />
                範囲の指定方法について、 Sourcer と相違がある点に注意してください。</p>
              <dl>
                <dt>{number} direction</dt>
                <dd>レーダーの方向を度数で指定。向いている方向を0とし、逆時計周り方向をプラス＋、時計回り方向をマイナス−。</dd>
                <dt>{number} angle</dt>
                <dd>レーダーの範囲・角度。</dd>
                <dt>{number} renge</dt>
                <dd>レーダーの距離。省略した場合、距離に関係無く判定される。</dd>
              </dl>
              <dl><dt>returns {boolean}</dt><dd>指定範囲内に敵が入っていた場合 true</dd>
              <h6>Sample</h6>
              <pre class="code">controller.scanEnemy(45, 60, 75);</pre>
              <div class="radar">
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>上向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="-135" data-angle="60"
                    data-distance="80" data-arrow="90"></canvas>
                </div>
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>下向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="45" data-angle="60"
                    data-distance="80" data-arrow="-90"></canvas>
                </div>
              </div>
              <div class="radar">
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>右向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="-45" data-angle="60"
                    data-distance="80" data-arrow="0"></canvas>
                </div>
                <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet">
                  <p>左向きの場合</p>
                  <canvas class="arc" width="160" height="160"
                    data-direction="135" data-angle="60"
                    data-distance="80" data-arrow="-180"></canvas>
                </div>
              </div>
            </div>
            <h4 class="sec">情報取得系の命令</h4>
            <div class="method">
              <h5>frame()</h5>
              <p>戦闘を開始してから経過した フレーム数 を取得します。</p>
              <dl><dt>returns {number}</dt><dd>戦闘を開始してから経過した フレーム数</dd>
            </div>
            <div class="method">
              <h5>altitude()</h5>
              <p>現在の高度を取得します。</p>
              <dl><dt>returns {number}</dt><dd>現在の高度値</dd>
            </div>
            <div class="method">
              <h5>fuel()</h5>
              <p>ミサイルの残燃料を取得します。</p>
              <dl><dt>returns {number}</dt><dd>ミサイルの残燃料</dd>
            </div>
            <div class="method">
              <h5>direction()</h5>
              <p>現在ミサイルが向いている方向を取得します。<br />
              右水平方向 を 0 とし、逆時計周り方向をプラス＋、時計回り方向をマイナス−。</p>
              <dl><dt>returns {number}</dt><dd>現在ミサイルが向いている方向</dd>
            </div>
            <h4 class="sec">その他の命令</h4>
            <div class="method">
              <h5>wait(frame)</h5>
              <p>指定したフレーム数、行動をしない命令を出します。</p>
              <dl>
                <dt>{number} frame</dt>
                <dd>行動をしないフレーム数</dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="//storage.googleapis.com/code.getmdl.io/1.0.4/material.min.js"></script>
  <script src="./statics/arc.js"></script>
  <script src="./statics/ace/ace.js" type="text/javascript" charset="utf-8"></script>
  <script src="./statics/aceLoader.js" type="text/javascript" charset="utf-8"></script>
  <script src="./dist/standalone.js"></script>
</body>

</html>
